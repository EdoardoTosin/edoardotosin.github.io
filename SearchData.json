---
permalink: /SearchData.json
---

{
  {%- assign all_items = "" | split: "" -%}

  {%- assign notes = site.notes | where_exp: "item", "item.format != 'list'" -%}
  {%- for item in notes -%}
    {%- assign all_items = all_items | push: item -%}
  {%- endfor -%}

  {%- assign posts = site.posts | where_exp: "item", "item.format != 'list'" -%}
  {%- for item in posts -%}
    {%- assign all_items = all_items | push: item -%}
  {%- endfor -%}

  {%- assign sorted_items = all_items | sort: "date" | reverse -%}
  {%- assign i = 0 -%}
  {% for item in sorted_items %}
    "{{ i }}": {
       "doc":  {{ item.title | strip_html | escape | jsonify }},
       "title": {{ item.title | strip_html | escape | jsonify }},
       "type": "{% if item.collection == 'posts' %}post{% else %}note{% endif %}",
       "content": {{ item.content | replace: '</h', ' . </h' | replace: '<hr', ' . <hr' | replace: '</p', ' . </p' | replace: '<ul', ' . <ul' | replace: '</ul', ' . </ul' | replace: '<ol', ' . <ol' | replace: '</ol', ' . </ol' | replace: '</tr', ' . </tr' | replace: '<li', ' | <li' | replace: '</li', ' | </li' | replace: '</td', ' | </td' | replace: '<td', ' | <td' | replace: '</th', ' | </th' | replace: '<th', ' | <th' | strip_html | remove: 'Table of contents' | normalize_whitespace | replace: '. . .', '.' | replace: '. .', '.' | replace: '| |', '|' | append: ' ' | strip_html | strip_newline | strip | escape | downcase | jsonify }},
       "url": "{{ item.url | relative_url }}"
       {%- if item.short_url -%},
       "short_url": {{ item.short_url | relative_url | jsonify }}
       {%- endif -%}
       {%- if item.tags -%},
       "tags": {{ item.tags | join: ' ' | downcase | jsonify }}
       {%- endif -%}
       {%- if item.keywords -%},
       "keywords": {{ item.keywords | join: ' ' | downcase | jsonify }}
       {%- endif -%}
       {%- if item.description -%},
       "description": {{ item.description | strip_html | escape | downcase | jsonify }}
       {%- endif -%}
       {%- if item.categories and item.categories.size > 0 -%},
       "categories": {{ item.categories | join: ' ' | downcase | jsonify }}
       {%- endif -%}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- assign i = i | plus: 1 -%}
  {% endfor %}
}
